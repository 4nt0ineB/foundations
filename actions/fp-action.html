<!DOCTYPE html>
<html>
<head>
  <title>FP Action</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>
<textarea id="source">

background-image: url(../img/fp-tower/website-background.svg)

class: center, middle, white

.title[FP Action]

---
# Actions must be

<br>

## 1. Delayed (errors)

## 2. Retryable (non-deterministic)

## 3. Async (non-blocking, run on multiple threads)

---
# By-name parameter

.eighty-two-left[
```scala
object Try {
  def apply[A](action: => A): Try[A] =
    ???
}
```

```scala
def retry[A](maxAttempt: Int)(action: => A): A =
  ???
```

```scala
object Future {
  def apply[A](action: => A)(implicit ec: ExecutionContext): Future[A] =
    ???
}
```
]

---
# Action encoding

.fifty-two-left[
```scala
object Action {
  def apply[A](action: => A): Action[A] =
    ???
}
```
]

---
# Action encoding

.fifty-two-left[
```scala
object Action {
  def apply[A](action: => A): Action[A] =
    ???
}
```
]

.fifty-two-left[
```scala
trait Action[A] {
  def execute(): A
}
```
]

---
# Action encoding

.fifty-seven-left[
```scala
object Action {
  def apply[A](action: => A): Action[A] =
    ???
}
```
]

.fifty-seven-left[
```scala
trait Action[A] {
  def execute(): A

  def retry(maxAttempt: Int): Action[A] =
    ???

  def onError(cb: Throwable => Any): Action[A] =
    ???

  def parallel(ec: ExecutionContext) =
    ???
}
```
]

--

.thirty-seven-right[
<br><br>
```scala
action
  .retry(5)
  .onError(log.error)
```
]

---
background-image: url(../img/fp-tower/website-background-white.svg)

class: middle, white

# Action.scala


</textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>
    var slideshow = remark.create({
        ratio: "16:9",
        slideNumberFormat: '',
        highlightLines: true,
        highlightSpans: true,
    });
</script>
</body>
</html>